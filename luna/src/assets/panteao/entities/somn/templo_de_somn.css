/*
 * Templo de Somn - Grimório de Estilos
 * Paleta: Reino dos Sonhos / Senhor das Narrativas
 * Primary: #8be9fd | Secondary: #bd93f9 | Accent: #f8f8f2
 * Background: #0a0a18 | Glow: #8be9fd
 */

/* --- A TELA PRINCIPAL (O REINO) --- */
Screen {
    background: #0a0a18;
    color: #f8f8f2;
}

/* --- PAINÉIS PRINCIPAIS --- */

#ascii-container {
    width: 44%;
    height: 100%;
    border: heavy #6272a4;
    background: #0a0a18;
    layout: vertical;
    padding: 0 1;
    dock: left;
    margin-right: 1;
    overflow: hidden;
}

#ascii-pane {
    width: 100%;
    height: 1fr;
    max-height: 100%;
    min-height: 20;
    border: none;
    padding: 1 1 0 1;
    content-align: center bottom;
    overflow-x: hidden;
    overflow-y: hidden;
    color: #8be9fd;
}

#right-pane {
    width: 56%;
    height: 100%;
    layout: vertical;
    dock: right;
    background: #0a0a18;
}

#welcome-pane {
    height: 12;
    max-height: 15;
    content-align: left top;
    border: none;
    margin-bottom: 0;
    padding: 1 0 0 1;
    background: #0a0a18;
}

#menu-pane {
    height: 5;
    align: center middle;
    border: heavy #6272a4;
    background: #0a0a18;
    padding: 0 0;
    margin-bottom: 0;
    content-align: center middle;
}

#chat-area {
    height: 1fr;
    border: heavy #6272a4;
    background: #0a0a18;
    margin-bottom: 0;
}

#input-container {
    layout: horizontal;
    height: auto;
    min-height: 4;
    max-height: 8;
    border: heavy #6272a4;
    background: #0a0a18;
    margin-top: 0;
    padding: 0 1;
    align: left bottom;
    content-align: left bottom;
    overflow: hidden;
}

/* --- WIDGETS --- */

#main_input {
    width: 1fr;
    height: auto;
    min-height: 3;
    max-height: 10;
    border: round transparent;
    background: #1a1a3a;
    padding: 0 1;
    color: #f8f8f2;
}

#main_input:focus {
    border: round #8be9fd;
    background: #24244a;
}

#main_input > .text-area--cursor {
    background: #8be9fd;
    color: #0a0a18;
}

#main_input > .text-area--selection {
    background: #6272a4;
}

#main_input.-has-focus > .text-area--cursor {
    background: #bd93f9;
}

Button {
    margin: 0 1 0 1;
    background: transparent;
    border: none;
    width: auto;
    min-width: 8;
    height: 3;
    content-align: center middle;
    text-align: center;
    color: #8be9fd;
}

#menu-pane>Button {
    width: 15;
    height: 3;
    padding: 0 0;
}

#menu-pane>Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

#input-container>Button {
    width: 9;
    min-width: 6;
    height: 3;
    text-align: center;
    content-align: center middle;
    padding: 0 0;
}

#input-container>Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

Button:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #8be9fd;
    border: none;
}

Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

Button.-active {
    background: #8be9fd;
    color: #0a0a18;
}

GlitchButton {
    color: #8be9fd;
    background: transparent;
}

GlitchButton:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #8be9fd;
}

GlitchButton:focus {
    background: rgba(68, 71, 90, 0.6);
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold reverse;
}

GlitchButton.focused {
    background: rgba(68, 71, 90, 0.6);
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold reverse;
}

#toggle_voice_call.Button.-error {
    background: #ff5555;
    color: #ffffff;
    border: none;
}

Button.pulsing {
    text-style: bold;
    background: #ff7979;
}

/* --- TELA DE HISTÓRICO --- */

HistoryScreen {
    layout: vertical;
    align: center middle;
    padding: 0;
    background: #0a0a18;
}

#history-container {
    width: 80%;
    max-width: 100;
    height: 80%;
    background: #0a0a18;
    border: tall #6272a4;
    padding: 2;
}

#history-header {
    width: 100%;
    height: auto;
    content-align: center middle;
    margin-bottom: 1;
}

#history-title {
    text-align: center;
    color: #8be9fd;
    text-style: bold;
    width: 100%;
}

#history-list {
    border: tall #6272a4;
    width: 100%;
    height: 1fr;
    background: #12122a;
    padding: 1;
}

#history-list > ListItem {
    background: transparent;
    margin-bottom: 1;
    padding: 1 2;
    color: #f8f8f2;
    border-left: wide #6272a4;
}

#history-list > ListItem:hover {
    background: rgba(98, 114, 164, 0.3);
    border-left: wide #8be9fd;
}

#history-list > ListItem:focus {
    background: rgba(98, 114, 164, 0.3);
    border-left: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

#history-list > ListItem.-selected {
    background: rgba(98, 114, 164, 0.3);
    border-left: wide #8be9fd;
}

#back-button {
    width: auto;
    min-width: 20;
    margin-top: 1;
    background: #1a1a3a;
    color: #f8f8f2;
    border: none;
}

#back-button:hover {
    background: rgba(98, 114, 164, 0.3);
}

#back-button:focus {
    background: #1a1a3a;
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

/* --- TELA CÂNONE (CONFIGURAÇÕES) --- */

CanoneScreen {
    align: center middle;
    background: rgba(0, 0, 0, 0.70);
}

#canone-overlay {
    width: 100%;
    height: 100%;
    align: center middle;
}

#canone-modal {
    width: 95%;
    max-width: 180;
    height: 95%;
    max-height: 80;
    background: rgba(15, 15, 37, 0.85);
    border: solid #6272a4;
    border-left: wide #8be9fd;
    padding: 1 2;
}

#canone-title {
    width: 100%;
    text-align: center;
    text-style: bold;
    color: #8be9fd;
    padding: 0;
    margin-bottom: 0;
}

#canone-subtitle {
    width: 100%;
    text-align: center;
    color: #6272a4;
    margin-bottom: 1;
}

#canone-tabs {
    height: 1fr;
    background: transparent;
}

#canone-tabs > ContentSwitcher {
    background: transparent;
}

#canone-tabs TabPane {
    background: #0a0a18;
    padding: 0;
}

#canone-tabs Tabs {
    background: #12122a;
    dock: top;
    height: 3;
    width: 100%;
    align: center middle;
    content-align: center middle;
}

#canone-tabs Tab {
    background: transparent;
    color: #6272a4;
    padding: 0 4;
    height: 3;
    width: 1fr;
    text-align: center;
    content-align: center middle;
}

#canone-tabs Tab:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #8be9fd;
}

#canone-tabs Tab.-active {
    background: rgba(98, 114, 164, 0.3);
    color: #8be9fd;
    text-style: bold;
}

#canone-tabs Underline {
    background: #8be9fd;
}

#entity-scroll,
#providers-scroll,
#voice-scroll,
#audio-scroll,
#keys-scroll,
#advanced-scroll,
#effects-scroll {
    background: transparent;
    padding: 1;
    scrollbar-background: #12122a;
    scrollbar-color: #6272a4;
}

.canone-section {
    color: #8be9fd;
    text-style: bold;
    margin-top: 1;
    margin-bottom: 0;
    padding: 0;
}

.canone-hint {
    color: #6272a4;
    margin-bottom: 0;
    padding: 0;
}

#canone-modal Select {
    width: 100%;
    margin-top: 0;
    margin-bottom: 1;
    background: #0a0a18;
    border: solid #6272a4;
    color: #f8f8f2;
}

#canone-modal Select:focus {
    border: double #8be9fd;
    background: #1a1a3a;
    color: #f8f8f2;
}

#canone-modal Input {
    width: 100%;
    margin-top: 0;
    margin-bottom: 1;
    background: #0a0a18;
    border: solid #6272a4;
    color: #f8f8f2;
    padding: 0 1;
}

#canone-modal Input:focus {
    border: double #8be9fd;
    background: #1a1a3a;
    color: #f8f8f2;
}

.canone-switch-row {
    width: 100%;
    height: 3;
    align: left middle;
    margin-bottom: 1;
}

.canone-switch-row Label {
    width: auto;
    padding-right: 2;
    color: #f8f8f2;
}

.canone-switch-row Switch {
    background: #6272a4;
}

Switch {
    background: #6272a4;
}

Switch.-on {
    background: #8be9fd;
}

#canone-buttons {
    width: 100%;
    height: 4;
    align: center middle;
    margin-top: 1;
    padding: 0 2;
    layout: horizontal;
}

#canone-buttons Button,
#canone-buttons GlitchButton {
    margin: 0 1;
    width: auto;
    min-width: 14;
    max-width: 28;
    height: 3;
    padding: 0 2;
    text-align: center;
    content-align: center middle;
    background: #1a1a3a;
    color: #f8f8f2;
    border: solid #6272a4;
}

#canone-buttons Button:hover,
#canone-buttons GlitchButton:hover {
    background: rgba(98, 114, 164, 0.5);
    border: solid #8be9fd;
}

#canone-buttons Button:focus,
#canone-buttons GlitchButton:focus {
    background: #1a1a3a;
    border: double #8be9fd;
    color: #f8f8f2;
    text-style: bold;
}

#canone-buttons #btn-save {
    background: #8be9fd;
    color: #0a0a18;
    border: solid #8be9fd;
}

#canone-buttons #btn-save:hover {
    background: #a8f0ff;
}

#canone-buttons #btn-save:focus {
    background: #8be9fd;
    border: double #bd93f9;
    text-style: bold;
}

/* --- BARRA DE STATUS --- */

#status-bar {
    width: 100%;
    height: 3;
    layout: horizontal;
    align: center middle;
    content-align: center middle;
    padding: 0 1;
    background: #0a0a18;
    border-top: solid #6272a4;
}

#status-label {
    width: auto;
    text-align: left;
    color: #8be9fd;
    text-style: bold;
    padding: 0 1 0 0;
    background: #0a0a18;
    display: none;
}

#status-label.status-visible {
    display: block;
}

#emotion-label {
    width: auto;
    min-width: 25;
    text-align: center;
    color: #8be9fd;
    text-style: bold;
    padding: 0 0 0 0;
    background: #0a0a18;
    display: block;
}

/* --- WIDGETS DE CHAT --- */

VerticalScroll#chat-list {
    background: #0a0a18;
    padding: 0 1;
    scrollbar-gutter: stable;
}

VerticalScroll {
    scrollbar-background: #0a0a18;
    scrollbar-color: #6272a4;
    scrollbar-color-hover: #8be9fd;
    scrollbar-color-active: #8be9fd;
}

.message-container {
    layout: vertical;
    height: auto;
    width: 100%;
    margin: 1 0;
    background: rgba(26, 26, 58, 0.8);
    padding: 1 2;
    border: none;
}

.message-luna {
    border-left: wide #8be9fd;
    background: rgba(139, 233, 253, 0.08);
}

.message-user {
    border-left: wide #bd93f9;
    background: #15152a;
}

.message-kernel {
    border-left: wide #6272a4;
    background: #12122a;
}

.message-code {
    border-left: wide #6272a4;
    background: rgba(10, 10, 24, 0.6);
}

.message-container.copied {
    border: round #50fa7b;
    background: #1a3020;
}

.msg-text.copied {
    background: rgba(80, 250, 123, 0.15);
    color: #50fa7b;
}

ClickableText:hover {
    background: #1a1a3a;
}

.msg-sender {
    width: 100%;
    text-align: left;
    text-style: bold;
    padding-bottom: 1;
}

.luna-sender {
    color: #8be9fd;
}

.user-sender {
    color: #bd93f9;
}

.kernel-sender {
    color: #6272a4;
}

.code-sender {
    color: #a8a8a8;
}

.system-sender {
    color: #8be9fd;
}

.msg-text {
    width: 100%;
    color: #f8f8f2;
    padding: 0 0;
    background: transparent;
}

Markdown {
    background: transparent;
    margin: 0;
    padding: 0;
}

.message-container Markdown {
    background: transparent;
}

MarkdownH1, MarkdownH2, MarkdownH3, MarkdownH4, MarkdownH5, MarkdownH6 {
    background: transparent;
    color: #8be9fd;
    margin: 0 0 1 0;
}

MarkdownParagraph {
    background: transparent;
    margin: 0;
}

MarkdownBlockQuote {
    background: #1a1a3a;
    border-left: wide #6272a4;
    padding: 0 1;
    margin: 1 0;
}

MarkdownBulletList, MarkdownOrderedList {
    background: transparent;
    margin: 0 0 0 2;
}

MarkdownListItem {
    background: transparent;
}

/* --- BLOCO DE CÓDIGO --- */

.code-block-container {
    background: #12122a;
    border: round #6272a4;
    margin: 1 0;
    height: auto;
    width: 100%;
}

.code-header {
    height: 3;
    background: #1a1a3a;
    padding: 0 2;
    border-bottom: solid #24244a;
}

.code-lang {
    color: #bd93f9;
    text-style: bold;
    width: 1fr;
}

.btn-code-copy {
    dock: right;
    min-width: 12;
    height: 1;
    background: #1a1a3a;
    color: #f8f8f2;
    border: round #6272a4;
}

.btn-code-copy:hover {
    background: #50fa7b;
    color: #0a0a18;
    border: round #50fa7b;
}

.code-content {
    padding: 0;
    height: auto;
    max-height: 30;
    background: #050510;
    border: none;
    scrollbar-gutter: stable;
    overflow-x: auto;
    overflow-y: auto;
}

.code-content:focus {
    border: none;
}

.code-block:hover .code-block-container {
    border: round #8be9fd;
}

.code-block.copied .code-block-container {
    border: round #50fa7b;
}

.code-hint {
    color: #6272a4;
    text-style: italic;
    width: auto;
    dock: right;
    padding-right: 1;
}

.code-block:hover .code-hint {
    color: #8be9fd;
}

/* --- VISUALIZADOR DE ÁUDIO --- */

#audio-visualizer {
    width: 100%;
    height: 12;
    max-height: 15;
    content-align: center middle;
    border: none;
    margin-bottom: 0;
    padding: 0;
    background: #0a0a18;
}

#audio-visualizer.hidden {
    display: none;
}

#welcome-pane.hidden {
    display: none;
}

#ascii-pane.hidden {
    display: none;
}

#ascii-pane.fullscreen {
    height: 100%;
    min-height: 100%;
}

.hidden {
    display: none;
}

.startup-hidden {
    display: none;
}

#ascii-container.transitioning {
    overflow: hidden;
}

/* --- MENU DE CONTEXTO --- */

ContextMenu {
    align: center middle;
    background: rgba(0, 0, 0, 0.7);
}

#context-menu-container {
    width: 35;
    height: auto;
    max-height: 15;
    background: #0f0f25;
    border: solid #6272a4;
    padding: 0;
}

ContextMenuItem {
    padding: 0 1;
    height: 1;
    background: #0f0f25;
}

ContextMenuItem:hover {
    background: #1a1a3a;
}

ContextMenuItem:focus {
    background: #8be9fd;
    color: #0a0a18;
}

.context-menu-item-label {
    width: 100%;
}

.separator-item {
    color: #6272a4;
    height: 1;
}

.separator-item:hover {
    background: #0f0f25;
}

/* --- ESTILOS DO RITUAL DE ONBOARDING --- */

.onboarding-hidden {
    display: none;
}

.onboarding-revealed {
    display: block;
    border: heavy #bd93f9;
    background: rgba(189, 147, 249, 0.18);
    color: #bd93f9;
    text-style: bold;
}

Button.onboarding-revealed,
GlitchButton.onboarding-revealed {
    display: block;
    border: heavy #bd93f9;
    background: rgba(189, 147, 249, 0.22);
    color: #f8f8f2;
    text-style: bold;
}

#main_input.onboarding-revealed {
    display: block;
    border: heavy #8be9fd;
    background: #1a1a3a;
}

.glitch-reveal {
    display: block;
    color: #50fa7b;
    border: double #50fa7b;
    background: rgba(80, 250, 123, 0.25);
    text-style: bold reverse;
}

Button.glitch-reveal,
GlitchButton.glitch-reveal {
    display: block;
    color: #0a0a18;
    border: double #50fa7b;
    background: #50fa7b;
    text-style: bold reverse;
}

.revealed-stable {
    display: block;
    border: solid #8be9fd;
    background: rgba(139, 233, 253, 0.1);
}

Button.revealed-stable,
GlitchButton.revealed-stable {
    display: block;
    border: solid #8be9fd;
    background: rgba(139, 233, 253, 0.12);
    color: #f8f8f2;
}

#welcome-pane.onboarding-hidden {
    display: none;
    background: #0a0a18;
}

.onboarding-static-overlay {
    width: 100%;
    height: 100%;
    background: #12122a;
    layer: overlay;
}

/* --- SELETOR DE ENTIDADE --- */

EntitySelectorScreen {
    align: center middle;
    background: #0a0a18;
}

#entity-container {
    width: 90;
    height: auto;
    background: #1a1a3a;
    border: heavy #8be9fd;
    padding: 2 4;
}

#entity-banner {
    width: 100%;
    height: auto;
    color: #8be9fd;
    text-align: center;
    content-align: center middle;
    padding: 1 0;
}

#entity-name {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #f8f8f2;
    text-style: bold;
    padding: 1 0;
}

#entity-description {
    width: 100%;
    height: auto;
    text-align: center;
    content-align: center middle;
    color: #6272a4;
    padding: 1 0;
}

#entity-status {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #f8f8f2;
    padding: 1 0;
}

.unavailable {
    color: #6272a4;
}

.unavailable #entity-banner {
    color: #24244a;
}

.unavailable #entity-name {
    color: #6272a4;
}

#navigation-hint {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #8be9fd;
    padding: 1 0;
}

/* --- FORMULÁRIOS DE ENTRADA --- */

Select {
    background: #0a0a18;
    border: tall #6272a4;
}

Select:focus {
    border: tall #8be9fd;
}

Input {
    background: #0a0a18;
    border: tall #6272a4;
}

Input:focus {
    border: tall #8be9fd;
}

/* --- ESTADO ATIVO DO BOTÃO DE VOZ --- */

#toggle_voice_call.voice-active {
    background: #8be9fd;
    color: #ffffff;
    text-style: bold;
    border: solid #8be9fd;
}

#toggle_voice_call.voice-inactive {
    background: transparent;
    color: #8be9fd;
}
