/*
 * Templo de Luna - Grimório de Estilos
 * Paleta: Gothic Purple Dracula
 * Primary: #BD93F9 | Secondary: #FF79C6 | Accent: #50FA7B
 * Background: #282A36 | Glow: #BD93F9
 */

/* --- A TELA PRINCIPAL (O MUNDO) --- */
Screen {
    background: #282a36;
    color: #f8f8f2;
}

/* --- PAINÉIS PRINCIPAIS --- */

#ascii-container {
    width: 44%;
    height: 100%;
    border: heavy #6272a4;
    background: #282a36;
    layout: vertical;
    padding: 0 1;
    dock: left;
    margin-right: 1;
    overflow: hidden;
}

#ascii-pane {
    width: 100%;
    height: 1fr;
    max-height: 100%;
    min-height: 20;
    border: none;
    padding: 1 1 0 1;
    content-align: center bottom;
    overflow-x: hidden;
    overflow-y: hidden;
    color: #bd93f9;
}

#right-pane {
    width: 56%;
    height: 100%;
    layout: vertical;
    dock: right;
    background: #282a36;
}

#welcome-pane {
    height: 12;
    max-height: 15;
    content-align: left top;
    border: none;
    margin-bottom: 0;
    padding: 1 0 0 1;
    background: #282a36;
}

#menu-pane {
    height: 5;
    align: center middle;
    border: heavy #6272a4;
    background: #282a36;
    padding: 0 0;
    margin-bottom: 0;
    content-align: center middle;
}

#chat-area {
    height: 1fr;
    border: heavy #6272a4;
    background: #282a36;
    margin-bottom: 0;
}

#input-container {
    layout: horizontal;
    height: auto;
    min-height: 4;
    max-height: 8;
    border: heavy #6272a4;
    background: #282a36;
    margin-top: 0;
    padding: 0 1;
    align: left bottom;
    content-align: left bottom;
    overflow: hidden;
}

/* --- WIDGETS --- */

#main_input {
    width: 1fr;
    height: auto;
    min-height: 3;
    max-height: 10;
    border: round transparent;
    background: #44475a;
    padding: 0 1;
    color: #f8f8f2;
}

#main_input:focus {
    border: round #bd93f9;
    background: #383a4d;
}

#main_input > .text-area--cursor {
    background: #bd93f9;
    color: #282a36;
}

#main_input > .text-area--selection {
    background: #6272a4;
}

#main_input.-has-focus > .text-area--cursor {
    background: #ff79c6;
}

Button {
    margin: 0 1 0 1;
    background: transparent;
    border: none;
    width: auto;
    min-width: 8;
    height: 3;
    content-align: center middle;
    text-align: center;
    color: #bd93f9;
}

#menu-pane>Button {
    width: 15;
    height: 3;
    padding: 0 0;
}

#menu-pane>Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

#input-container>Button {
    width: 9;
    min-width: 6;
    height: 3;
    text-align: center;
    content-align: center middle;
    padding: 0 0;
}

#input-container>Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

Button:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #bd93f9;
    border: none;
}

Button:focus {
    background: rgba(98, 114, 164, 0.3);
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

Button.-active {
    background: #bd93f9;
    color: #282a36;
}

GlitchButton {
    color: #bd93f9;
    background: transparent;
}

GlitchButton:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #bd93f9;
}

GlitchButton:focus {
    background: rgba(68, 71, 90, 0.6);
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold reverse;
}

GlitchButton.focused {
    background: rgba(68, 71, 90, 0.6);
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold reverse;
}

#toggle_voice_call.Button.-error {
    background: #ff5555;
    color: #ffffff;
    border: none;
}

Button.pulsing {
    text-style: bold;
    background: #ff7979;
}

/* --- TELA DE HISTÓRICO --- */

HistoryScreen {
    layout: vertical;
    align: center middle;
    padding: 0;
    background: #282a36;
}

#history-container {
    width: 80%;
    max-width: 100;
    height: 80%;
    background: #282a36;
    border: tall #6272a4;
    padding: 2;
}

#history-header {
    width: 100%;
    height: auto;
    content-align: center middle;
    margin-bottom: 1;
}

#history-title {
    text-align: center;
    color: #bd93f9;
    text-style: bold;
    width: 100%;
}

#history-list {
    border: tall #6272a4;
    width: 100%;
    height: 1fr;
    background: #1e1f29;
    padding: 1;
}

#history-list > ListItem {
    background: transparent;
    margin-bottom: 1;
    padding: 1 2;
    color: #f8f8f2;
    border-left: wide #6272a4;
}

#history-list > ListItem:hover {
    background: rgba(98, 114, 164, 0.3);
    border-left: wide #bd93f9;
}

#history-list > ListItem:focus {
    background: rgba(98, 114, 164, 0.3);
    border-left: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

#history-list > ListItem.-selected {
    background: rgba(98, 114, 164, 0.3);
    border-left: wide #bd93f9;
}

#back-button {
    width: auto;
    min-width: 20;
    margin-top: 1;
    background: #44475a;
    color: #f8f8f2;
    border: none;
}

#back-button:hover {
    background: rgba(98, 114, 164, 0.3);
}

#back-button:focus {
    background: #44475a;
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

/* --- TELA CANONE (CONFIGURACOES) --- */

CanoneScreen {
    align: center middle;
    background: rgba(0, 0, 0, 0.70);
}

#canone-overlay {
    width: 100%;
    height: 100%;
    align: center middle;
}

#canone-modal {
    width: 95%;
    max-width: 180;
    height: 95%;
    max-height: 80;
    background: rgba(45, 47, 61, 0.80);
    border: solid #6272a4;
    border-left: wide #bd93f9;
    padding: 1 2;
}

#canone-title {
    width: 100%;
    text-align: center;
    text-style: bold;
    color: #bd93f9;
    padding: 0;
    margin-bottom: 0;
}

#canone-subtitle {
    width: 100%;
    text-align: center;
    color: #6272a4;
    margin-bottom: 1;
}

#canone-tabs {
    height: 1fr;
    background: transparent;
}

#canone-tabs > ContentSwitcher {
    background: transparent;
}

#canone-tabs TabPane {
    background: #282a36;
    padding: 0;
}

#canone-tabs Tabs {
    background: #1e1f29;
    dock: top;
    height: 3;
    width: 100%;
    align: center middle;
    content-align: center middle;
}

#canone-tabs Tab {
    background: transparent;
    color: #6272a4;
    padding: 0 4;
    height: 3;
    width: 1fr;
    text-align: center;
    content-align: center middle;
}

#canone-tabs Tab:hover {
    background: rgba(98, 114, 164, 0.3);
    color: #bd93f9;
}

#canone-tabs Tab.-active {
    background: rgba(98, 114, 164, 0.3);
    color: #bd93f9;
    text-style: bold;
}

#canone-tabs Underline {
    background: #bd93f9;
}

#entity-scroll,
#providers-scroll,
#voice-scroll,
#audio-scroll,
#keys-scroll,
#advanced-scroll,
#effects-scroll {
    background: transparent;
    padding: 1;
    scrollbar-background: #1e1f29;
    scrollbar-color: #6272a4;
}

.canone-section {
    color: #bd93f9;
    text-style: bold;
    margin-top: 1;
    margin-bottom: 0;
    padding: 0;
}

.canone-hint {
    color: #6272a4;
    margin-bottom: 0;
    padding: 0;
}

#canone-modal Select {
    width: 100%;
    margin-top: 0;
    margin-bottom: 1;
    background: #282a36;
    border: solid #6272a4;
    color: #f8f8f2;
}

#canone-modal Select:focus {
    border: double #bd93f9;
    background: #383a4d;
    color: #f8f8f2;
}

#canone-modal Input {
    width: 100%;
    margin-top: 0;
    margin-bottom: 1;
    background: #282a36;
    border: solid #6272a4;
    color: #f8f8f2;
    padding: 0 1;
}

#canone-modal Input:focus {
    border: double #bd93f9;
    background: #383a4d;
    color: #f8f8f2;
}

.canone-switch-row {
    width: 100%;
    height: 3;
    align: left middle;
    margin-bottom: 1;
}

.canone-switch-row Label {
    width: auto;
    padding-right: 2;
    color: #f8f8f2;
}

.canone-switch-row Switch {
    background: #6272a4;
}

Switch {
    background: #6272a4;
}

Switch.-on {
    background: #bd93f9;
}

#canone-buttons {
    width: 100%;
    height: 4;
    align: center middle;
    margin-top: 1;
    padding: 0 2;
    layout: horizontal;
}

#canone-buttons Button,
#canone-buttons GlitchButton {
    margin: 0 1;
    width: auto;
    min-width: 14;
    max-width: 28;
    height: 3;
    padding: 0 2;
    text-align: center;
    content-align: center middle;
}

CanoneScreen #btn-save-canone,
#canone-modal #btn-save-canone,
#btn-save-canone {
    background: #50fa7b;
    color: #282a36;
    text-style: bold;
    border: none;
    width: auto;
    min-width: 18;
    max-width: 22;
}

#btn-save-canone:hover {
    background: #69ff94;
    border: none;
}

#btn-save-canone:focus {
    background: #2d6e45;
    color: #50fa7b;
    border: double #bd93f9;
    text-style: bold;
}

CanoneScreen #btn-cancel-canone,
#canone-modal #btn-cancel-canone,
#btn-cancel-canone {
    background: #44475a;
    color: #f8f8f2;
    border: solid #6272a4;
    width: auto;
    min-width: 18;
    max-width: 22;
}

#btn-cancel-canone:hover {
    background: #6272a4;
    border: solid #bd93f9;
}

#btn-cancel-canone:focus {
    background: #44475a;
    border: double #bd93f9;
    color: #f8f8f2;
    text-style: bold;
}

/* --- ÁREA DE STATUS --- */

#status-area {
    height: 3;
    width: 100%;
    align: center middle;
    content-align: center middle;
    padding: 0;
    margin-bottom: 0;
    layout: horizontal;
    background: #282a36;
}

#status-label {
    width: auto;
    text-align: left;
    color: #bd93f9;
    text-style: bold;
    padding: 0 1 0 0;
    background: #282a36;
    display: none;
}

#status-label.status-visible {
    display: block;
}

#emotion-label {
    width: auto;
    min-width: 25;
    text-align: center;
    color: #bd93f9;
    text-style: bold;
    padding: 0 0 0 0;
    background: #282a36;
    display: block;
}

/* --- CHAT WIDGETS --- */

VerticalScroll#chat-list {
    background: #282a36;
    padding: 0 1;
    scrollbar-gutter: stable;
}

VerticalScroll {
    scrollbar-background: #282a36;
    scrollbar-color: #6272a4;
    scrollbar-color-hover: #bd93f9;
    scrollbar-color-active: #bd93f9;
}

.message-container {
    layout: vertical;
    height: auto;
    width: 100%;
    margin: 1 0;
    background: rgba(68, 71, 90, 0.8);
    padding: 1 2;
    border: none;
}

.message-luna {
    border-left: wide #bd93f9;
    background: rgba(189, 147, 249, 0.08);
}

.message-user {
    border-left: wide #8be9fd;
    background: #1e2a35;
}

.message-kernel {
    border-left: wide #6272a4;
    background: #2a2a2a;
}

.message-code {
    border-left: wide #6272a4;
    background: rgba(40, 42, 54, 0.6);
}

.message-container.copied {
    border: round #50fa7b;
    background: #1a3020;
}

.msg-text.copied {
    background: rgba(80, 250, 123, 0.15);
    color: #50fa7b;
}

ClickableText:hover {
    background: #383a4d;
}

.msg-sender {
    width: 100%;
    text-align: left;
    text-style: bold;
    padding-bottom: 1;
}

.luna-sender {
    color: #bd93f9;
}

.user-sender {
    color: #8be9fd;
}

.kernel-sender {
    color: #6272a4;
}

.code-sender {
    color: #a8a8a8;
}

.system-sender {
    color: #bd93f9;
}

.msg-text {
    width: 100%;
    color: #f8f8f2;
    padding: 0 0;
    background: transparent;
}

Markdown {
    background: transparent;
    margin: 0;
    padding: 0;
}

.message-container Markdown {
    background: transparent;
}

MarkdownH1, MarkdownH2, MarkdownH3, MarkdownH4, MarkdownH5, MarkdownH6 {
    background: transparent;
    color: #bd93f9;
    margin: 0 0 1 0;
}

MarkdownParagraph {
    background: transparent;
    margin: 0;
}

MarkdownBlockQuote {
    background: #383a4d;
    border-left: wide #6272a4;
    padding: 0 1;
    margin: 1 0;
}

MarkdownBulletList, MarkdownOrderedList {
    background: transparent;
    margin: 0 0 0 2;
}

MarkdownListItem {
    background: transparent;
}

/* --- CODE BLOCK --- */

.code-block-container {
    background: #1e1f29;
    border: round #6272a4;
    margin: 1 0;
    height: auto;
    width: 100%;
}

.code-header {
    height: 3;
    background: #2d2e3a;
    padding: 0 2;
    border-bottom: solid #44475a;
}

.code-lang {
    color: #8be9fd;
    text-style: bold;
    width: 1fr;
}

.btn-code-copy {
    dock: right;
    min-width: 12;
    height: 1;
    background: #44475a;
    color: #f8f8f2;
    border: round #6272a4;
}

.btn-code-copy:hover {
    background: #50fa7b;
    color: #282a36;
    border: round #50fa7b;
}

.code-content {
    padding: 0;
    height: auto;
    max-height: 30;
    background: #0a0b10;
    border: none;
    scrollbar-gutter: stable;
    overflow-x: auto;
    overflow-y: auto;
}

.code-content:focus {
    border: none;
}

.code-block {
}

.code-block:hover .code-block-container {
    border: round #bd93f9;
}

.code-block.copied .code-block-container {
    border: round #50fa7b;
}

.code-hint {
    color: #6272a4;
    text-style: italic;
    width: auto;
    dock: right;
    padding-right: 1;
}

.code-block:hover .code-hint {
    color: #bd93f9;
}

/* --- AUDIO VISUALIZER --- */

#audio-visualizer {
    width: 100%;
    height: 12;
    max-height: 15;
    content-align: center middle;
    border: none;
    margin-bottom: 0;
    padding: 0;
    background: #282a36;
}

#audio-visualizer.hidden {
    display: none;
}

#welcome-pane.hidden {
    display: none;
}

#ascii-pane.hidden {
    display: none;
}

#ascii-pane.fullscreen {
    height: 100%;
    min-height: 100%;
}

/* --- VOICE TRAINER SCREEN --- */

VoiceTrainerScreen {
    background: #282a36;
}

#trainer-main {
    width: 100%;
    height: 1fr;
    padding: 1 2;
    layout: vertical;
}

#trainer-panels {
    width: 100%;
    height: 1fr;
    layout: horizontal;
}

#recorder-panel {
    width: 55%;
    height: 100%;
    border: heavy #bd93f9;
    padding: 1 2;
    margin-right: 1;
    background: rgba(40, 42, 54, 0.9);
}

#settings-panel {
    width: 45%;
    height: 100%;
    border: heavy #6272a4;
    padding: 1 2;
    background: rgba(40, 42, 54, 0.9);
}

#recorder-title,
#settings-title {
    width: 100%;
    text-align: center;
    text-style: bold;
    color: #ff79c6;
    padding-bottom: 1;
    border-bottom: solid #44475a;
    margin-bottom: 1;
}

#settings-title {
    color: #8be9fd;
}

#phrase-display {
    width: 100%;
    height: 5;
    background: #1e1f29;
    border: round #bd93f9;
    padding: 1 2;
    color: #f8f8f2;
    content-align: center middle;
    text-align: center;
    margin-bottom: 1;
}

#phrase-controls {
    width: 100%;
    height: 3;
    align: center middle;
    margin-bottom: 1;
}

#sample-counter {
    width: auto;
    min-width: 20;
    padding: 0 2;
    color: #50fa7b;
    text-style: bold;
}

#recording-indicator {
    width: 100%;
    height: 2;
    text-align: center;
    content-align: center middle;
    margin-bottom: 1;
}

#recording-progress {
    width: 100%;
    height: 1;
    margin-bottom: 1;
}

#recording-progress>.bar--bar {
    color: #ff5555;
}

#recording-progress>.bar--complete {
    color: #50fa7b;
}

#recorder-buttons {
    width: 100%;
    height: 5;
    align: center middle;
    margin-bottom: 1;
}

#recorder-buttons>Button {
    width: 12;
    height: 3;
    margin: 0 1;
}

#btn-record {
    background: #50fa7b;
    color: #282a36;
}

#btn-record:hover {
    background: #69ff94;
}

#btn-stop {
    background: #ff5555;
    color: #ffffff;
}

#btn-stop:hover {
    background: #ff6e6e;
}

#btn-play {
    background: #8be9fd;
    color: #282a36;
}

#btn-play:hover {
    background: #a4efff;
}

#btn-discard {
    background: #ffb86c;
    color: #282a36;
}

#btn-discard:hover {
    background: #ffc98a;
}

#btn-save-sample {
    width: 100%;
    height: 3;
    background: #bd93f9;
    color: #282a36;
    text-style: bold;
}

#btn-save-sample:hover {
    background: #caa8ff;
}

.setting-label {
    width: 100%;
    color: #f8f8f2;
    padding: 1 0 0 0;
    text-style: bold;
}

.setting-hint {
    width: auto;
    color: #6272a4;
    padding-left: 1;
}

.slider-row {
    width: 100%;
    height: 3;
    align: left middle;
}

.slider-row>Input {
    width: 15;
}

#settings-panel>Input {
    width: 100%;
    height: 3;
    background: #44475a;
    border: round #6272a4;
    padding: 0 1;
    margin-bottom: 0;
}

#settings-panel>Input:focus {
    border: round #bd93f9;
}

#advanced-toggle {
    width: 100%;
    height: 3;
    align: left middle;
    margin-top: 1;
}

#advanced-toggle>Label {
    width: auto;
    padding: 0;
}

#switch-normalize {
    margin-left: 1;
}

#settings-spacer {
    height: 1fr;
}

#samples-list-container {
    width: 100%;
    height: auto;
    max-height: 10;
    border-top: solid #44475a;
    padding-top: 1;
}

#samples-list {
    width: 100%;
    height: auto;
    max-height: 6;
    color: #6272a4;
    padding: 0 1;
    overflow-y: auto;
}

#btn-start-training {
    width: 100%;
    height: 5;
    margin-top: 1;
    background: #bd93f9;
    color: #282a36;
    text-style: bold;
    border: heavy #ff79c6;
}

#btn-start-training:hover {
    background: #ff79c6;
    border: heavy #bd93f9;
}

#btn-start-training:disabled {
    background: #44475a;
    color: #6272a4;
    border: heavy #44475a;
}

.hidden {
    display: none;
}

.startup-hidden {
    display: none;
}

#ascii-container.transitioning {
    overflow: hidden;
}

/* --- CONTEXT MENU --- */

ContextMenu {
    align: center middle;
    background: rgba(0, 0, 0, 0.7);
}

#context-menu-container {
    width: 35;
    height: auto;
    max-height: 15;
    background: #2d2f3d;
    border: solid #6272a4;
    padding: 0;
}

ContextMenuItem {
    padding: 0 1;
    height: 1;
    background: #2d2f3d;
}

ContextMenuItem:hover {
    background: #44475a;
}

ContextMenuItem:focus {
    background: #bd93f9;
    color: #282a36;
}

.context-menu-item-label {
    width: 100%;
}

.separator-item {
    color: #6272a4;
    height: 1;
}

.separator-item:hover {
    background: #2d2f3d;
}

/* --- CODE OUTPUT PANEL --- */

CodeOutputPanel {
    height: 100%;
    background: #1e1f29;
}

#code-output-header {
    height: 1;
    background: #2d2f3d;
    color: #bd93f9;
    padding: 0 1;
    text-style: bold;
}

#code-output-area {
    height: 1fr;
    background: #1e1f29;
    border: none;
    scrollbar-background: #2d2f3d;
    scrollbar-color: #6272a4;
}

#code-status {
    height: 1;
    background: #2d2f3d;
    color: #6272a4;
    padding: 0 1;
}

.code-output-clickable {
}

/* --- ONBOARDING RITUAL STYLES --- */

.onboarding-hidden {
    display: none;
}

.onboarding-revealed {
    display: block;
    border: heavy #ff79c6;
    background: rgba(255, 121, 198, 0.18);
    color: #ff79c6;
    text-style: bold;
}

Button.onboarding-revealed,
GlitchButton.onboarding-revealed {
    display: block;
    border: heavy #ff79c6;
    background: rgba(255, 121, 198, 0.22);
    color: #f8f8f2;
    text-style: bold;
}

#main_input.onboarding-revealed {
    display: block;
    border: heavy #bd93f9;
    background: #383a4d;
}

.glitch-reveal {
    display: block;
    color: #50fa7b;
    border: double #50fa7b;
    background: rgba(80, 250, 123, 0.25);
    text-style: bold reverse;
}

Button.glitch-reveal,
GlitchButton.glitch-reveal {
    display: block;
    color: #282a36;
    border: double #50fa7b;
    background: #50fa7b;
    text-style: bold reverse;
}

.revealed-stable {
    display: block;
    border: solid #bd93f9;
    background: rgba(189, 147, 249, 0.1);
}

Button.revealed-stable,
GlitchButton.revealed-stable {
    display: block;
    border: solid #bd93f9;
    background: rgba(189, 147, 249, 0.12);
    color: #f8f8f2;
}

#welcome-pane.onboarding-hidden {
    display: none;
    background: #282a36;
}

.onboarding-static-overlay {
    width: 100%;
    height: 100%;
    background: #1a1a2e;
    layer: overlay;
}

/* --- ENTITY SELECTOR --- */

EntitySelectorScreen {
    align: center middle;
    background: #282a36;
}

#entity-container {
    width: 90;
    height: auto;
    background: #44475a;
    border: heavy #bd93f9;
    padding: 2 4;
}

#entity-banner {
    width: 100%;
    height: auto;
    color: #bd93f9;
    text-align: center;
    content-align: center middle;
    padding: 1 0;
}

#entity-name {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #f8f8f2;
    text-style: bold;
    padding: 1 0;
}

#entity-description {
    width: 100%;
    height: auto;
    text-align: center;
    content-align: center middle;
    color: #6272a4;
    padding: 1 0;
}

#entity-status {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #f8f8f2;
    padding: 1 0;
}

.unavailable {
    color: #6272a4;
}

.unavailable #entity-banner {
    color: #44475a;
}

.unavailable #entity-name {
    color: #6272a4;
}

#navigation-hint {
    width: 100%;
    height: 3;
    text-align: center;
    content-align: center middle;
    color: #bd93f9;
    padding: 1 0;
}

/* --- INPUT FORMS --- */

Select {
    background: #282a36;
    border: tall #6272a4;
}

Select:focus {
    border: tall #bd93f9;
}

Input {
    background: #282a36;
    border: tall #6272a4;
}

Input:focus {
    border: tall #bd93f9;
}

/* --- VOICE BUTTON ACTIVE STATE --- */

#toggle_voice_call.voice-active {
    background: #bd93f9;
    color: #ffffff;
    text-style: bold;
    border: solid #bd93f9;
}

#toggle_voice_call.voice-inactive {
    background: transparent;
    color: #bd93f9;
}
